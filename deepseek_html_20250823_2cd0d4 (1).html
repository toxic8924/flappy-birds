<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Flappy - Futuristic Flappy Bird</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #e0f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }
        
        header {
            text-align: center;
            margin-bottom: 15px;
            width: 100%;
        }
        
        h1 {
            font-size: 3.2rem;
            background: linear-gradient(45deg, #00bcd4, #00e5ff, #00bcd4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(0, 229, 255, 0.5);
            margin-bottom: 10px;
            letter-spacing: 2px;
            font-weight: 800;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #80deea;
            margin-bottom: 20px;
        }
        
        .instructions {
            background: rgba(0, 30, 39, 0.7);
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.2);
            margin-bottom: 15px;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .game-container {
            position: relative;
            width: 100%;
            height: 420px;
            border: 2px solid #00bcd4;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 25px rgba(0, 188, 212, 0.4);
            background: linear-gradient(160deg, #05161d, #0d2b35);
        }
        
        #game-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .video-container {
            width: 100%;
            border: 2px solid #00bcd4;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 25px rgba(0, 188, 212, 0.4);
            background: #05161d;
        }
        
        #background-video {
            width: 100%;
            display: block;
            background: #000;
        }
        
        .score-container {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.2rem;
            font-weight: bold;
            color: #00e5ff;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.8);
            z-index: 10;
            background: rgba(0, 20, 30, 0.6);
            padding: 5px 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 229, 255, 0.4);
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: bold;
            background: linear-gradient(45deg, #006978, #0097a7);
            color: #e0f7fa;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 150, 167, 0.5);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            background: linear-gradient(45deg, #00838f, #00bcd4);
            transform: translateY(-3px);
            box-shadow: 0 0 20px rgba(0, 188, 212, 0.7);
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 20, 30, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
            backdrop-filter: blur(5px);
        }
        
        .game-over h2 {
            font-size: 3.5rem;
            color: #ff4081;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255, 64, 129, 0.7);
        }
        
        .game-over p {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #80deea;
        }
        
        .cyber-stats {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        
        .stat {
            text-align: center;
            background: rgba(0, 30, 39, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 229, 255, 0.3);
        }
        
        .stat-value {
            font-size: 2rem;
            color: #00e5ff;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #80deea;
        }
        
        .hud {
            position: absolute;
            bottom: 15px;
            left: 15px;
            display: flex;
            gap: 15px;
        }
        
        .hud-item {
            background: rgba(0, 30, 39, 0.7);
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 229, 255, 0.3);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Mobile Controls */
        .mobile-controls {
            display: none;
            position: absolute;
            bottom: 20px;
            right: 20px;
            gap: 15px;
            z-index: 50;
        }
        
        .control-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(45deg, #006978, #0097a7);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 0 15px rgba(0, 150, 167, 0.7);
            user-select: none;
            touch-action: manipulation;
        }
        
        .control-btn:active {
            background: linear-gradient(45deg, #00838f, #00bcd4);
            transform: scale(0.95);
        }
        
        /* Control instructions */
        .control-instructions {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .control-item {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 30, 39, 0.5);
            padding: 8px 15px;
            border-radius: 8px;
        }
        
        .control-key {
            background: rgba(0, 229, 255, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .game-container {
                height: 350px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .cyber-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .mobile-controls {
                display: flex;
            }
            
            .control-instructions {
                display: none;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .control-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
        }
        
        /* Cyberpunk elements */
        .cyber-line {
            height: 2px;
            width: 100%;
            background: linear-gradient(90deg, transparent, #00bcd4, transparent);
            margin: 10px 0;
        }
        
        .glow {
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.8);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        /* Futuristic grid background */
        .grid-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(0, 188, 212, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 188, 212, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -1;
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="container">
        <header>
            <h1>CYBER FLAPPY</h1>
            <div class="subtitle">Navigate through the energy gates in 3023</div>
            <div class="instructions">
                <p>Click or press SPACE to thrust. Avoid energy gates and walls!</p>
            </div>
        </header>
        
        <div class="game-container">
            <canvas id="game-canvas"></canvas>
            <div class="score-container">Score: <span id="score">0</span></div>
            
            <div class="hud">
                <div class="hud-item">
                    <i class="fas fa-rocket"></i> <span id="speed">0</span> km/s
                </div>
                <div class="hud-item">
                    <i class="fas fa-bolt"></i> <span id="energy">100</span>%
                </div>
            </div>
            
            <!-- Mobile Controls -->
            <div class="mobile-controls">
                <div class="control-btn" id="thrust-btn">
                    <i class="fas fa-arrow-up"></i>
                </div>
            </div>
            
            <div class="game-over" id="game-over">
                <h2>SYSTEM FAILURE!</h2>
                <p>Score: <span id="final-score">0</span></p>
                
                <div class="cyber-stats">
                    <div class="stat">
                        <div class="stat-value" id="gates-passed">0</div>
                        <div class="stat-label">Gates Passed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="max-speed">0</div>
                        <div class="stat-label">Max Speed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="energy-collected">0</div>
                        <div class="stat-label">Energy Collected</div>
                    </div>
                </div>
                
                <button id="restart-button">
                    <i class="fas fa-sync-alt"></i> Reboot System
                </button>
            </div>
        </div>
        
        <div class="video-container">
            <video id="background-video" controls>
                <source src="https://player.vimeo.com/external/370331493.sd.mp4?s=e90dcaba73c19e0e36f03406b47b5e33e8ca7a94&profile_id=139&oauth2_token_id=57447761" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div class="controls">
            <button id="play-pause">
                <i class="fas fa-play"></i> Play Video
            </button>
            <button id="mute-unmute">
                <i class="fas fa-volume-up"></i> Mute Video
            </button>
            <button id="fullscreen">
                <i class="fas fa-expand"></i> Fullscreen
            </button>
        </div>
        
        <div class="cyber-line"></div>
        
        <div class="instructions">
            <p><i class="fas fa-info-circle"></i> Collect energy orbs to increase your speed and score multiplier!</p>
        </div>
        
        <div class="control-instructions">
            <div class="control-item">
                <span class="control-key">SPACE</span>
                <span>or</span>
                <span class="control-key">CLICK</span>
                <span>Thrust upward</span>
            </div>
            <div class="control-item">
                <span class="control-key">R</span>
                <span>Restart game</span>
            </div>
            <div class="control-item">
                <span class="control-key">M</span>
                <span>Mute video</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const scoreElement = document.getElementById('score');
            const finalScoreElement = document.getElementById('final-score');
            const gameOverScreen = document.getElementById('game-over');
            const restartButton = document.getElementById('restart-button');
            const playPauseButton = document.getElementById('play-pause');
            const muteUnmuteButton = document.getElementById('mute-unmute');
            const fullscreenButton = document.getElementById('fullscreen');
            const video = document.getElementById('background-video');
            const speedElement = document.getElementById('speed');
            const energyElement = document.getElementById('energy');
            const gatesPassedElement = document.getElementById('gates-passed');
            const maxSpeedElement = document.getElementById('max-speed');
            const energyCollectedElement = document.getElementById('energy-collected');
            const thrustButton = document.getElementById('thrust-btn');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Game variables
            let score = 0;
            let gameOver = false;
            let frames = 0;
            let gameSpeed = 3;
            let maxGameSpeed = 7;
            let speedMultiplier = 1;
            let energy = 100;
            let energyOrbs = [];
            let gatesPassed = 0;
            let maxSpeed = 0;
            let energyCollected = 0;
            
            // Stars for background
            let stars = [];
            for (let i = 0; i < 100; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speed: Math.random() * 2 + 1
                });
            }
            
            // Spaceship properties
            const ship = {
                x: 70,
                y: canvas.height / 2,
                width: 40,
                height: 30,
                gravity: 0.4,
                velocity: 0,
                thrust: -8,
                rotation: 0,
                
                draw: function() {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation);
                    
                    // Draw spaceship body
                    ctx.fillStyle = '#00bcd4';
                    ctx.beginPath();
                    ctx.moveTo(0, -this.height/2);
                    ctx.lineTo(this.width, 0);
                    ctx.lineTo(0, this.height/2);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw cockpit
                    ctx.fillStyle = '#006978';
                    ctx.beginPath();
                    ctx.arc(10, 0, 8, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw engine glow
                    ctx.fillStyle = '#ff4081';
                    ctx.beginPath();
                    ctx.arc(-5, 0, 5, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw thrust
                    if (this.velocity > 0) {
                        ctx.fillStyle = '#ff4081';
                        ctx.beginPath();
                        ctx.moveTo(-10, -5);
                        ctx.lineTo(-20 - Math.random() * 10, 0);
                        ctx.lineTo(-10, 5);
                        ctx.closePath();
                        ctx.fill();
                    }
                    
                    ctx.restore();
                },
                
                update: function() {
                    // Apply gravity
                    this.velocity += this.gravity;
                    this.y += this.velocity;
                    
                    // Rotate based on velocity
                    this.rotation = this.velocity * 0.05;
                    
                    // Floor collision
                    if (this.y + this.height/2 >= canvas.height - 10) {
                        this.y = canvas.height - 10 - this.height/2;
                        if (!gameOver) {
                            endGame();
                        }
                    }
                    
                    // Ceiling collision
                    if (this.y - this.height/2 <= 10) {
                        this.y = this.height/2 + 10;
                        this.velocity = 0;
                    }
                    
                    // Update energy
                    energy -= 0.1;
                    if (energy <= 0) {
                        energy = 0;
                        if (!gameOver) {
                            endGame();
                        }
                    }
                    energyElement.textContent = Math.floor(energy);
                },
                
                thrustUp: function() {
                    this.velocity = this.thrust;
                    energy -= 2;
                },
                
                reset: function() {
                    this.y = canvas.height / 2;
                    this.velocity = 0;
                    this.rotation = 0;
                    energy = 100;
                }
            };
            
            // Energy gates (instead of pipes)
            const gates = {
                position: [],
                width: 70,
                gap: 160,
                maxYPos: -100,
                
                draw: function() {
                    for (let i = 0; i < this.position.length; i++) {
                        let g = this.position[i];
                        
                        // Draw energy gate
                        ctx.fillStyle = '#00bcd4';
                        ctx.fillRect(g.x, g.y, this.width, g.height);
                        
                        // Draw energy field
                        ctx.fillStyle = 'rgba(0, 229, 255, 0.3)';
                        ctx.fillRect(g.x, g.y + g.height, this.width, this.gap);
                        
                        // Draw gate edges with glow
                        ctx.fillStyle = '#ff4081';
                        ctx.fillRect(g.x - 3, g.y, 6, g.height);
                        ctx.fillRect(g.x + this.width - 3, g.y, 6, g.height);
                        
                        ctx.fillRect(g.x - 3, g.y + g.height + this.gap, 6, canvas.height);
                        ctx.fillRect(g.x + this.width - 3, g.y + g.height + this.gap, 6, canvas.height);
                    }
                },
                
                update: function() {
                    if (gameOver) return;
                    
                    if (frames % 100 === 0) {
                        this.position.push({
                            x: canvas.width,
                            y: this.maxYPos * (Math.random() + 1),
                            height: 150 + Math.random() * 100,
                            passed: false
                        });
                    }
                    
                    for (let i = 0; i < this.position.length; i++) {
                        let g = this.position[i];
                        
                        // Move gates to the left
                        g.x -= gameSpeed;
                        
                        // Check for collision
                        if (
                            ship.x + ship.width/2 > g.x && 
                            ship.x - ship.width/2 < g.x + this.width && 
                            (
                                ship.y - ship.height/2 < g.y + g.height || 
                                ship.y + ship.height/2 > g.y + g.height + this.gap
                            )
                        ) {
                            endGame();
                        }
                        
                        // Update score when ship passes a gate
                        if (g.x + this.width < ship.x && !g.passed) {
                            score += 10 * speedMultiplier;
                            scoreElement.textContent = score;
                            g.passed = true;
                            gatesPassed++;
                            
                            // Occasionally generate energy orbs
                            if (Math.random() > 0.5) {
                                energyOrbs.push({
                                    x: g.x + this.width/2,
                                    y: g.y + g.height + this.gap/2,
                                    radius: 8,
                                    collected: false
                                });
                            }
                        }
                        
                        // Remove gates that go off-screen
                        if (g.x + this.width <= 0) {
                            this.position.shift();
                        }
                    }
                },
                
                reset: function() {
                    this.position = [];
                }
            };
            
            // Draw background
            function drawBackground() {
                // Draw space background
                ctx.fillStyle = '#05161d';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw stars
                ctx.fillStyle = '#ffffff';
                for (let star of stars) {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Move stars
                    star.x -= star.speed;
                    if (star.x < 0) {
                        star.x = canvas.width;
                        star.y = Math.random() * canvas.height;
                    }
                }
                
                // Draw futuristic grid floor and ceiling
                ctx.fillStyle = 'rgba(0, 188, 212, 0.2)';
                ctx.fillRect(0, 0, canvas.width, 10);
                ctx.fillRect(0, canvas.height - 10, canvas.width, 10);
                
                // Draw grid lines
                ctx.strokeStyle = 'rgba(0, 188, 212, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                for (let x = 0; x < canvas.width; x += 30) {
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                }
                for (let y = 0; y < canvas.height; y += 30) {
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                }
                ctx.stroke();
            }
            
            // Update and draw energy orbs
            function updateEnergyOrbs() {
                for (let i = 0; i < energyOrbs.length; i++) {
                    let orb = energyOrbs[i];
                    
                    // Draw energy orb
                    ctx.fillStyle = '#ff4081';
                    ctx.beginPath();
                    ctx.arc(orb.x, orb.y, orb.radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw glow
                    ctx.fillStyle = 'rgba(255, 64, 129, 0.3)';
                    ctx.beginPath();
                    ctx.arc(orb.x, orb.y, orb.radius * 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Move orb
                    orb.x -= gameSpeed;
                    
                    // Check collection
                    if (!orb.collected && 
                        Math.abs(ship.x - orb.x) < (ship.width/2 + orb.radius) && 
                        Math.abs(ship.y - orb.y) < (ship.height/2 + orb.radius)) {
                        orb.collected = true;
                        energy = Math.min(100, energy + 20);
                        energyCollected++;
                        score += 5 * speedMultiplier;
                        scoreElement.textContent = score;
                    }
                    
                    // Remove orbs that go off-screen or are collected
                    if (orb.x + orb.radius <= 0 || orb.collected) {
                        energyOrbs.splice(i, 1);
                        i--;
                    }
                }
            }
            
            // Game loop
            function loop() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw background
                drawBackground();
                
                // Update and draw gates
                gates.update();
                gates.draw();
                
                // Update and draw energy orbs
                updateEnergyOrbs();
                
                // Update and draw ship
                ship.update();
                ship.draw();
                
                // Gradually increase game speed
                if (frames % 500 === 0 && gameSpeed < maxGameSpeed) {
                    gameSpeed += 0.5;
                    speedMultiplier += 0.1;
                }
                
                // Update speed display
                let displaySpeed = Math.floor(gameSpeed * 10);
                speedElement.textContent = displaySpeed;
                if (displaySpeed > maxSpeed) {
                    maxSpeed = displaySpeed;
                }
                
                // Continue the game loop
                if (!gameOver) {
                    frames++;
                    requestAnimationFrame(loop);
                }
            }
            
            // Start the game
            function startGame() {
                score = 0;
                gameOver = false;
                frames = 0;
                gameSpeed = 3;
                speedMultiplier = 1;
                gatesPassed = 0;
                maxSpeed = 0;
                energyCollected = 0;
                energyOrbs = [];
                
                scoreElement.textContent = score;
                gameOverScreen.style.display = 'none';
                
                ship.reset();
                gates.reset();
                
                loop();
            }
            
            // End the game
            function endGame() {
                gameOver = true;
                finalScoreElement.textContent = score;
                gatesPassedElement.textContent = gatesPassed;
                maxSpeedElement.textContent = maxSpeed;
                energyCollectedElement.textContent = energyCollected;
                gameOverScreen.style.display = 'flex';
            }
            
            // Thrust function
            function thrust() {
                if (gameOver) {
                    startGame();
                } else {
                    ship.thrustUp();
                }
            }
            
            // Event listeners
            canvas.addEventListener('click', thrust);
            
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space') {
                    thrust();
                    e.preventDefault();
                } else if (e.code === 'KeyR') {
                    startGame();
                } else if (e.code === 'KeyM') {
                    toggleMute();
                }
            });
            
            // Mobile touch event
            thrustButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                thrust();
            });
            
            // For mobile devices, also allow touch anywhere on canvas
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                thrust();
            });
            
            restartButton.addEventListener('click', startGame);
            
            // Video controls
            function togglePlayPause() {
                if (video.paused) {
                    video.play();
                    playPauseButton.innerHTML = '<i class="fas fa-pause"></i> Pause Video';
                } else {
                    video.pause();
                    playPauseButton.innerHTML = '<i class="fas fa-play"></i> Play Video';
                }
            }
            
            function toggleMute() {
                if (video.muted) {
                    video.muted = false;
                    muteUnmuteButton.innerHTML = '<i class="fas fa-volume-up"></i> Mute Video';
                } else {
                    video.muted = true;
                    muteUnmuteButton.innerHTML = '<i class="fas fa-volume-mute"></i> Unmute Video';
                }
            }
            
            playPauseButton.addEventListener('click', togglePlayPause);
            
            muteUnmuteButton.addEventListener('click', toggleMute);
            
            fullscreenButton.addEventListener('click', function() {
                if (video.requestFullscreen) {
                    video.requestFullscreen();
                } else if (video.webkitRequestFullscreen) {
                    video.webkitRequestFullscreen();
                } else if (video.msRequestFullscreen) {
                    video.msRequestFullscreen();
                }
            });
            
            // Initialize the game
            startGame();
            
            // Handle window resize
            window.addEventListener('resize', function() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            });
        });
    </script>
</body>
</html>